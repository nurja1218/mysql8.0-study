- MyISAM
  - 키 캐시
    - InnoDB의 버퍼 풀 역할
    - but, 인덱스만 대상으로 작동하며 인덱스의 디스크 쓰기 작업에 대해서만 부분적 버퍼링 역할
  - 키 캐시 히트율
    - 100 - (Key_reads / Key_read_requests \* 100)
    - 일반적으로 키 캐시 히트율 99% 유지 권장
      - 히트율 낮다면 키 캐시를 조금 더 크게 설정
  - 명명된 추가 키 캐시
    - Default가 아닌 키 캐시는 어떤 인덱스를 캐시할지 설정해줘야 사용된다
  - 운영체제의 캐시 및 버퍼
    - MyISAM은 디스크로부터 I/O를 해결할 캐시,버퍼링 기능이 없기 때문에 운영체제의 I/O작업을 요청할 수 밖에 없다
      - InnoDB: 버퍼 풀, 로그 버퍼(리두로그), 체인지 버퍼 등을 통해 I/O작업 효율적 관리
    - InnoDB만큼은 아니라도 캐시나 버퍼링 기능을 하는데, 메모리를 다 사용하면 다른 애플리케이션 사용에 문제가 생기므로 키 캐시는 물리 메모리의 최대 40%를 넘지 않게 설정한다
  - 프라이머리 키 구조
    - 클러스터링 없이 데이터 파일이 힙 공간처럼 활용됨
    - 프라이머리 키와 무관하게 insert되는 순서대로 데이터 파일 저장(pk순서대로 저장x)
    - MyISAM테이블의 레코드는 ROWID라는 물리적 주솟값을 가짐
      - 고정 길이 ROWID
        - 서버가 최대로 가질 수 있는 레코드가 한정
      - 가변 길이 ROWID
        - 시스템 변수에 설정된 바이트 수 만큼의 공간을 사용할 수 있음
- MySQL 로그파일
  - 에러 로그 파일
    - 실행 도중 발생하는 에러, 경고 메시지가 출력되는 로그파일(특정 경로에 mysql설정 파일에 저장 or .err로 저장)
  - 주된 에러 로그 메시지 종류
    - MySQL 시작 관련 정보 및 에러 메시지
      - MySQL 설정 파일 변경 후 또는 비정상 종료 후 재시작 시, 에러 로그 파일을 통해 설정 확인 필요함
        - **`mysqld: ready for connections`** 메시지로 정상 기동 확인
        - 특별한 에러나 경고 없으면 새로운 파라미터가 정상 적용됨
          (max_connections, query_cache_size, innodb_buffer_pool_size 등)
        - 특정 변수 무시(ignore)될 경우, 파라미터가 MySQL에 적용되지 않음을 의미
        - 변수명 또는 값 인식 못 할 경우, 에러 메시지 출력 및 기동 실패 가능성 있음
    - 비정상 종료 시 InnoDB 트랜잭션 복구 메시지
      - InnoDB는 비정상적으로 종료된 후 재시작 시 미완료 트랜잭션 정리 및 미기록 데이터 재기록 작업 수행
      - 복구 불가 시 에러 메시지 출력 후 MySQL 다시 종료될 수 있음
      - **`innodb_force_recovery`** 파라미터를 사용해 복구 후 MySQL 재시작 가능
    - 쿼리 처리 중 발생하는 에러 메시지
      - 쿼리 실행 도중 발생한 에러나 복제 문제에 대한 경고 메시지가 에러 로그에 기록됨
        (Syntax Error, Type Mismatch, Deadlock, Timeout 등..)
      - 정기적인 에러 로그 파일 검토가 데이터베이스 문제 해결에 도움이 됨
    - 비정상적으로 종료된 커넥션 메시지 (Aborted connection)
      - 정상적으로 종료하지 않고 프로그램이 종료될 경우 발생
      - 네트워크 문제로 접속이 의도치 않게 끊길 경우에도 발생
      - 로그에 빈번히 기록(빈번히 급작스럽게 종료)되면 애플리케이션의 커넥션 종료 로직 검토 필요
      - **`max_connect_errors`** 값이 너무 낮으면 **`Host host_name is blocked`** 에러 발생할 수 있음
    - InnoDB 모니터링 또는 상태 조회 명령의 결과 메시지
      - InnoDB 테이블 모니터링, 락 모니터링, 엔진 상태 조회 명령은 에러 로그에 큰 메시지를 기록함
      - 모니터링 활성화 상태 유지 시 에러 로그 파일 크기 증가 가능성 → 비활성화 필요
    - MySQL 종료 메시지
      - 에러 로그에서 MySQL이 종료된 이유를 확인할 수 있는 유일한 방법
      - 누군가가 종료시킨 경우 `Received SHUTDOWN from user...` 메시지 확인
      - 종료 관련 메시지 없고 스택 트레이스 출력 시 세그먼테이션 폴트로 인한 비정상 종료 판단
      - 버전 업그레이드 또는 회피책(WorkAround)을 찾는 것이 권장됨
    - 제너럴 쿼리 로그 파일(General Query Log)
      - MySQL 서버가 시작부터 종료할 때까지 발생하는 모든 client 연결과 client가 실행한 모든 SQL 문을 포함
      - 슬로우쿼리와 달리 실행되기 전이라도 쿼리 요청을 받으면 로그 저장
      - 매우 상세한 정보를 기록 → 로그 파일이 빠르게 커질 수 있음 → 필요한 경우에만 활성화
    - 슬로우 쿼리 로그
      - 서버에 부하를 주거나 시스템 성능을 저하시킬 수 있는 느린 쿼리를 기록하는 로그 파일
      - 운영 중인 서버의 성능 저하 검사나 정기적인 점검에 도움이 되고, 쿼리 최적화 및 성능 문제 해결에 유용
      - 쿼리가 정상적으로 실행이 완료되야 슬로우 쿼리 로그에 기록됨
      - 슬로우 쿼리 로그나 제너럴 쿼리 로그는 양이 많아서 하나씩 검토는 어려울 수 있음
      - 운영 환경에서도 활성화하여 지속적인 성능 모니터링 및 최적화에 사용가능
      - 로깅 내용
        - 실행 시간이 설정된 임계값을 초과하는 쿼리
          (`long_query_time` 설정)
        - 쿼리의 실행 시간과 잠금에 걸린 시간
        - 필요한 경우, 쿼리가 반환한 행의 수
